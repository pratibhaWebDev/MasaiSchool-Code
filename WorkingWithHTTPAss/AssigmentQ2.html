<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="" id="userForm" >
        <label for="name">Name</label> <br>
        <input type="text" id="nameId" required> <br>
        <label for="email">Email</label> <br>
        <input type="email" id="emailId" required> <br>
        <label for="password">Password</label> <br>
        <input type="password" id="passwordId" required> <br>
        <button id="registerBtn">Register</button>
    </form>
    <section class="showMessage"></section
</body>
</html>
<script>
    let api='https://67e406dc2ae442db76d2aeb4.mockapi.io/form'

    let form=document.getElementById("userForm")
    form.addEventListener("submit",async function(e){
        e.preventDefault()

        const name=document.getElementById("nameId")
        const email=document.getElementById("emailId")
        const password=document.getElementById("passwordId")

        const checkResponse=await fetch(`${api}?email=${email}`)
        const user=await checkResponse.json()

        if(user.length>0){
            alert("Email already exists")
            return
        }

        const userData={name,eamil,password}
        const response=await fetch(api,{
            method:"POST",
            headers:{
                "Content-Type":"application/json"
               
            },
            body:JSON.stringify(userData)
        })

        if(response.ok){
            alert("User registered Successfully")

        }else{
            alert("something went wrong")
        }
    })

    // async function fetchUsers() {
    //         const response = await fetch(apiUrl);
    //         const users = await response.json();

    //         const userList = document.getElementById("userList");
    //         userList.innerHTML = users.map(user => 
    //             `<p>${user.name} - ${user.email} - Password: (hidden)</p>`
    //         ).join('');
    //     }


</script>